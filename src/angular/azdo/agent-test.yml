name: agent-test.yml

# trigger:
#   branches:
#     include:
#     - master

trigger: none
pr: none

variables:
  nodeVer: "22.12.0"
  dist: angular-devops
  appRoot: src/angular/angular-devops

stages:
  - stage: build

    jobs:
      - job: Job
        pool:
          name: win-selfhosted

        steps:
          - task: NodeTool@0
            inputs:
              versionSpec: $(nodeVer)
            displayName: "Install Node.js"

          - script: |
              npm install
            displayName: "Install packages"
            workingDirectory: $(appRoot)

          - script: npm run build
            displayName: "Run build"
            workingDirectory: $(appRoot)

          - task: PublishBuildArtifacts@1
            inputs:
              PathtoPublish: "$(System.DefaultWorkingDirectory)/$(appRoot)/dist/$(dist)"
              ArtifactName: "ngapp"
              publishLocation: "Container"
            displayName: "Publish Artifacts"
